<!DOCTYPE html>
<head>
  <title>diagonal vrugan</title>
  <link href="stylesheets/vrugan.css" rel="stylesheet">   
  <meta name="viewport" content="minimum-scale=1">  
  <meta name="viewport" content="maximum-scale=1">  
</head>
<body>
  <div class="body-bground">
    <img class="body-bground-img" src="/bground/assets/poly-settings.png">
  </div>
  <div class="container">
    <main>
      <div class="stage-view from-right">
	  <div class="stage-surface">
	    <div class="paper">
	      <h1>vrugan</h1>
	      <h3 class="text">magic scrolls</h3>
	    </div>
	    <div class="divider"></div>
          </div>
      </div> <!-- stage view -->
      <div class="stage-view from-left">
	  <div class="stage-surface">
	      <div class="paper">
		<h1>vrugan</h1>
		<h3 class="text">magic scrolls</h3>
	      </div>
	      <div class="divider"></div>
	 </div>       	  
      </div> <!-- stage view -->      
    </main>
  </div>
  <script type="module" src="/js/util/util.js"></script>
  <script type="module">

    import { tr, offsetter, postfixer } from '../../js/globals.js'
    import { qs } from '../../../js/util/util.js'
    import { vrug } from '../../js/vrug.js'

    
    const standardParentRange = 150
    const ranges = offsetter()

    const vhStartPoint = postfixer(ranges.startPoint, 'vh')
    const vhEndPoint = postfixer(ranges.endPoint, 'vh')
    
    const master = vrug('body')
    
    const asVw = (n) => `${n}vw`
    const asVh = (n) => `${n}vh`
    
    const addDirection = (follower, dir, s, e, ps, pe, unit = 'vw') => {
	const ownUnits = dir === 'h' ? asVw : asVh
	console.log('add',dir, ownUnits(s),ownUnits(e),asVw(ps),asVw(pe) )
	return follower
	    .senses('v')
	    .responds(dir)
	    .set('start', ownUnits(s))
	    .set('end', ownUnits(e))	
	    .set('parentStart', asVw(ps)  )
	    .set('parentEnd', asVw(pe) )    
	    .listen()
	
    }
    
    const addScroller = (sel) => {
	return  master
	  .scrolls(sel)
    }
    
    const follower0 = addScroller('.stage-view.from-right')
    addDirection(follower0, 'h', 0, 100,0,100)
    addDirection(follower0, 'v',  0, 45,25,50)
    addDirection(follower0, 'v',  45,195,125,375)    
   
    const follower1 = addScroller('.stage-view.from-left')
    const offset = 250
    addDirection(follower1, 'h', 100, 0, offset, offset + 100)
    addDirection(follower1, 'v',  0, 45,offset + 25, offset + 50)
    addDirection(follower1, 'v',  45,195,offset + 125, offset + 375)

    follower0.init()
    follower1.init()
    
  </script>
</body>
